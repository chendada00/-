# 常用技巧记录

### window自启动jar

```shell
#新建start.bat
java -jar xxx.jar
#新建start.vbs
createobject("wscript.shell").run"C:\testRestartJar\start.bat",0

#window+R打开自启动目录
shell:Common Startup

放入start.vbs的快捷方式
```

## 删除重复记录

```sql
delete
from t_ad_alarmevent
where event_id in (
    SELECT event_id
    FROM (
             SELECT event_id,
                    event_type_id,
                    alarm_point_id,
                    alarm_flag_id,
                    start_time,
                    alarm_time,
                    priority,
                    limit_value,
                    in_shelved,
                    in_suppressed,
                    operator,
                    des,
                    previous_value,
                    now_value,
                    parameter,
                    unit_code,
                    prdtcell_id,
                    dcs_code,
                    tag,
                    alarm_flag,
                    row_number() over (
                        PARTITION BY event_type_id,
                            alarm_point_id,
                            alarm_flag_id,
                            start_time,
                            alarm_time,
                            priority,
                            limit_value,
                            in_shelved,
                            in_suppressed,
                            operator,
                            des,
                            previous_value,
                            now_value,
                            parameter,
                            unit_code,
                            prdtcell_id,
                            dcs_code,
                            tag,
                            alarm_flag
                        ORDER BY
                            event_id ASC
                        ) rn
             FROM t_ad_alarmevent
             WHERE write_time > '2022-09-20 20:00:00'
         ) t
    WHERE t.rn > 1
)
```

## linux端口测试

```shell
# 安装
yum -y install nc

# 测试udp端口
nc -uvz 10.121.2.199 9998

# 测试tcp端口
nc -zv 10.121.2.199 8080
```

## Java使用注解进行参数校验

```java
//分组校验
@Valid      // Java自带的校验器，，不支持组校验
@Validated  // Spring 扩展的校验器，支持组校验

1. 定义分组
// 更新分组， 
public interface Update {
}
// 新增分组
public interface Add {
}

2.pojo类定义
@Data
public class BannersEntity {
    /**
     * 编号
     * 指定校验分组为 Update
     */
    @TableId
    @NotNull(message = "id不能为空", groups = {Update.class}) //
    private Long id;
    /**
     * 图片名称
     * 指定校验分组为 Update 和 add
     */
    @NotBlank(message = "图片名称不能为空", groups = {Add.class, Update.class})
    private String name;
}

3.controller参数校验
@RequestMapping("/save")
    public R save(@RequestBody 
                  @Validated(value = {Add.class}) BannersEntity banners) {

        bannersService.save(banners);

        return R.ok();
    }
```

## window查看端口占用

```shell
netstat -aon|findstr "8080"

# 其中-T是包括了子进程，-F是强制
taskkill  /PID 7452 -T -F
```

## Java删除集合重复项

```java
protected final <T> List<T> removeDuplicates(List<T> list) {
    return new ArrayList<>(new LinkedHashSet<>(list));
}
```

## oracle解除锁表

```sql
# 查询
select * from v$session t1, v$locked_object t2 where t1.sid = t2.SESSION_ID;
# 杀死进程
alter system kill session 'sid,serial';
```

## git

```shell
# 取消每次push时验证密码
git config --global credential.helper store

# 配置仓库地址
git clone https://gitee.com/cheebo/note.git

# 强制拉取
git pull --rebase origin master
```

## IAAS，PAAS，SAAS

- ==IAAS==(Infrastructure as a Service):基础设施即服务
  - 提供基础服务，例如云服务器
- ==PAAS==(Platform as a Service):平台即服务
  - 对外提供一项单独的服务，例如支付系统
- ==SAAS==(Software-as-a-Service):软件即服务
  - 对外提供一套完善的系统，例如财务系统
